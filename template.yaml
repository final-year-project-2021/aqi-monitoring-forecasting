AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: >
  aqi-app
  SAM Template for aqi-app

Globals:
  Function:    
    Timeout: 180  
    Runtime: python3.8  
    Environment:
      Variables:
        TABLE_NAME: SensorsDataTable
        TZ: Asia/Calcutta

Resources:  
  SensorsDataTable:
    Type: AWS::Serverless::SimpleTable
    Properties:
      PrimaryKey:
        Name: Date-Time
        Type: String        
      TableName: SensorsDataTable
      Tags: 
        Project: aqi-app

  ScrapperFunction:
    Type: AWS::Serverless::Function 
    Properties:
      FunctionName: Scrapper
      CodeUri: Scrapper/      
      Handler: app.lambda_handler           
      Policies: AmazonDynamoDBFullAccess 
      Events:
        Scheduler:
          Type: Schedule
          Properties:
            Schedule: 'rate(2 hours)'
